<html><head><title>Hacking the world – Forcing Email Read Receipts</title>

<script language="JavaScript1.2" src="/menu/menu.js"></script>
<link href="/menu/include_menu.css" rel="stylesheet" type="text/css" />

</head>
<body >
<table>
<tr border = 0>
<td width='12px' valign=top border=2 > &nbsp;</td>
<td colspan=2>
        <table cellpadding=0 cellspacing=0 width="100%" style="background-image: url(images/Header-Background.JPG)" >
            <tr>
                <td style="width: 250px">
                    <img src="images/Map-Title.jpg" />
                </td>
                <td valign=top>
                    <br />
                    <strong><span style="font-size: 12pt;  color: blue;"><span style="font-size: 16pt;
                        color: dimgray; font-family: Comic Sans MS">
                            Hacking the world &nbsp;- &nbsp;Forcing Email Read-Receipts
                        <br />
                    </span>
                        <br />
                        <hr />
                        <span style="font-size: 10pt; color: #000000; font-family: Verdana;">Author: Anup Shinde.</span></span></strong></td>
            </tr>
        </table>
</td>
</tr>
<tr border = 0>
<td width='12px' valign=top border=2 > &nbsp;</td>
<td border = 0 valign=top style="font-size: 10pt; font-family: Verdana; letter-spacing: normal;">
    <br />
    <hr style="font-size: 10pt" />
    <br />
    <strong>The basics
        <br />
    </strong>
    <br />
    Many email spam programs
    use this technique frequently to create effective spam. The article is completely meant for technical people, but I would try to ease it for the non-technical people,
    as much as possible.
    <br />
    <br />
    <em>Note:</em> This technique is not the one used by “Outlook Express” or other
    software that have an option to request a mail read receipt. In this case we are
    not requesting the client to send a receipt, but we are attempting our best to force
    a read receipt.
    <br />
    <br />
    <br />
    <br />
    <strong>Background
        <br />
    </strong>
    <br />
    This technique is basically based on the HTML. Hypertext Markup Language, the coding
    language used to create hypertext documents for the World Wide Web. In HTML, a block
    of text can be surrounded with tags that indicate how it should appear (for example,
    in bold face or italics). This allows electronic publishers to display rich or formatted
    text/information on the Internet. Therefore, it creates a great substitute for the
    plain-text content.
    <br />
    <br />
    HTML being a standard for web publishing and having rich-text functionality, today
    most E-mail editors allows you to send HTML mails instead of plain text mails. Similarly
    most of email software allows you to read HTML emails.
    <br />
    <br />
    The technique that we are going to use here is based on a specific feature of HTML.
    In HTML a word, a block of text, or an image can be linked to another file on the
    Web. That another file could be on the same web or from another webpage.
    <br />
    <br />
    This way the HTML email readers are expected to behave in the same way like the
    web-browsers.
    <br />
    <br />
    <br />
    <strong>The trick
        <br />
    </strong>
    <br />
    The HTML email readers will show all the content that the HTML specifies. Therefore
    it will also show the external content if the HTML specifies it. Now the point here
    is that the external content is shown. This external content can be anything, including
    anything we link it to.
    <br />
    <br />
    So if I specified an image into the HTML mail with its source from my site as:
    <br />
    <br />
    <span style="font-size: 9pt"><span style="color: maroon"><em>&lt;img src = “http://myserver.com/my_picture.jpg”
        /&gt;</em><br />
    </span></span>
    <br />
    It would
    directly show the image as if it was embedded inside the mail, though it
    came from outside.
    <br />
    <br />
    Suppose I want a receipt for the mail written to my colleague Keane. How would I
    do it?
    <br />
    <br />
    As you see, the “&lt;IMG&gt;”&nbsp; tag points to an image on my server. But what if I do not point the source to an image, but to some scripted dynamic page that
    takes the shortened subject of the mail as a parameter. Whenever the mail is opened,
    the page will get accessed.
    <br />
    <br />
    We can script this page to perform some activities like sending a mail receipt to
    us. Since we do not want the image to expose the trick, we reduce its size to “
    1x1 pixels”
    <br />
    <br />
    <em><span style="color: maroon">&lt;IMG src="http://myserver.com/receipt.aspx?id=HelloKeane"
        height = "1px" width="1px" /&gt;<br />
    </span></em>
    <br />
    <span style="text-decoration: underline">So we can brief that</span>: Whenever the
    HTML email is displayed; the image source will be accessed. And whenever the image-source
    is accessed, we get a mail saying that the subjected mail has been read.
    <br />
    <br />
    <strong>
        <br />
        <br />
        How to plant a “force-receipt” image?
        <br />
    </strong>
    <br />
    <p>
        I will explain a very raw method of
    doing this.&nbsp;<br />
        <br />
    </p>
    <p>
        --&gt; First create a “.html” page. Say “somereceipt.html”.</p>
    <p>
        --&gt; Open it with notepad and put the following line into it.&nbsp;</p>
    <p>
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
        <img height="1" src="http://myserver.com/receipt.aspx?id=HelloKeane" width="1" /><span
            style="color: maroon">&lt;IMG src="http://myserver.com/receipt.aspx?id=HelloKeane"
            height = "1px" width="1px" /&gt;&nbsp;</span></p>
    <p>
        --&gt; Save the file and close it.&nbsp;</p>
    <p>
        <img src="images/Plant-Image-HTML.JPG" />&nbsp;</p>
    <p>
        &nbsp;</p>
    <p>
        --&gt; Double-click and open the HTML file (in IE or other browser).&nbsp;</p>
    <p>
        --&gt; Press “Ctrl + A” (Select All) and then “Ctrl + C” (Copy).&nbsp;</p>
    <p>
        <img src="images/Plant-Image-Copy.JPG" />&nbsp;</p>
    <p>
        <br />
        Open your HTML email editor (Outlook or GMail…anything) and at the end of the mail
        press “Ctrl + V”. This will plant the receipt image into the mail. You can send
        that mail whenever you want.
        <br />
    </p>
    <br />
    <img src="images/Plant-Image-GMail.JPG" /><br />
    <br />
    <br />
    <br />
    <br />
    The problem with the “raw” method is that you will yourself trigger the mail receipt
    while opening the HTML page and while pasting it in your email editor. You’ll just
    need to ignore these.
    <br />
    <br />
    <br />
    People who want to use it regularly can use the services from “<strong>DidTheyReadIt or ReadNotify</strong>”. These services make the procedure very simple.
    <br />
    <br />
    <br />
    <br />
    <strong>Sending a read-receipt mail and other details (Using ASP.NET 2.0)
        <br />
    </strong>
    <br />
    Here comes the more technical part. I am writing a page in ASP.NET 2.0, but you
    can use any other platform.
    <br />
    <br />
    As discussed
    above, we are a passing a query-string parameter to the page.
    Here, this query string contains the subject that we wrote in the email. You could have
    other parameter(s) as required.
    <br />
    <br />
    As soon as the web page (that we scripted) receives these parameters, it sends us
    the mail that the subjected mail was read.
    <br />
    <br />
    <strong>What all information can we get?<br />
    </strong>
    <br />
    Since the browser/mail reader is indirectly accessing our page, we can get all the
    information that the browser can provide. For example: IP Address, Browser/Machine
    information. But there is much more that the browser can give away.
    <br />
    <br />
    Get your browser spied at <a href="http://gemal.dk/browserspy/"  target="_blank">http://gemal.dk/browserspy/</a>. 
    <br />
    The pages in the above link give a lot of information about your browser and machine.<br />
    <br />
    Here the attached sample code will send a mail receipt along with some easily accessible
    browser information. This sample creates a HTML mail, to show the information in
    a formatted manner.<br />
    <br />
    To gather the information about the browser we can use the “Request.Browser.Capabilities”
    dictionary object available in .NET 2.0.<br />
    <br />
    To get some other information the code uses the following:<ul>
        <li>Request.UserHostAddress</li>
        <li>Request.UserHostName</li>
        <li>Request.AcceptTypes</li>
        <li>Request.UserLanguages</li>
    </ul>
    Details of these classes can be found at MSDN.<br />
    <br />
    In the “Page_Load” event itself, we are creating the HTML mail to be sent to us.
    The “Request.Browser.Capabilities” object gives us a “System.Collections.IDictionary”
    type. We iterate through the “Key, value” pair in the dictionary and display the information, as shown below.<br />
    <br />
    <span style="font-size: 8pt; color: maroon">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
        System.Collections.IDictionary oDictionary = Request.Browser.Capabilities;&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;foreach(System.Collections.DictionaryEntry
        oDictionaryEntry in oDictionary)&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;{&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sHTML += &lt;tr&gt;";&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sHTML += "&lt;td&gt;"
        + (oDictionaryEntry.Key == null ? "NULL" : oDictionaryEntry.Key.ToString()) + "&lt;/td&gt;";&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sHTML += "&lt;td&gt;"
        + (oDictionaryEntry.Value==null?"NULL":oDictionaryEntry.Value.ToString()) + "&lt;/td&gt;";&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sHTML += "&lt;/tr&gt;";&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;}
        <br />
        <br />
    </span>
    <br />
    <br />
    <strong>Source code </strong>
    <br />
    <br />
    The ASP.NET 2.0 based source code can be found <a href="src/ReceiptMailSrc.zip">here</a>.<br />
    <br />
    <br />
    <strong>Does this always work?
        <br />
    </strong>
    <br />
    This trick may not always work, especially with the famous public email services.
    They take enough steps to restrict it, since it is an indirect disclosure of privacy.
    As the image points to the external content, the user is required to be connected
    to internet if the receipt is to be received. Also the HTML email reader must be
    available to the user.
    <br />
    <br />
    <br />
    <strong>How service providers are restricting it?
        <br />
    </strong>
    <br />
    Mail service providers like GMail, Yahoo and Hotmail do restrict these things. They
    simply restrict it by not allowing the “External” content to be displayed. As the
    image in the above example points to the external content (on your site), this will
    also get restricted. But it still works with Outlook and many other web-mail services.
    It will still take time to be restricted from most places. Till then …Enjoy!!!.
    <br />
    <br />
    <hr style="font-size: 10pt" />
    <br />
    <em><strong>Note:
        <br />
    </strong>Any example used in this article may contain scrambled.<br />
    </em>
    <br />
    Please do not hesitate to ask queries/suggestions/issues/anything. Click <strong>
<a href="" onclick="javascript:window.open('/static/anup-contact.htm','','height=225,width=450');return false;"><span
        style="color: #3300ff"><span style="text-decoration: underline">here</span> </span></a>    
    </strong>for contact information.&nbsp;<br />
    <em>&nbsp;</em><br />
    <br />


</td>



<td border = 0  valign=top style="width: 3px">
    <script type="text/javascript"><!--
    google_ad_client = "pub-7512590957470103";
    google_ad_width = 160;
    google_ad_height = 600;
    google_ad_format = "160x600_as";
    google_ad_type = "text_image";
    google_ad_channel ="";
    google_color_border = "FDEFD2";
    google_color_bg = "FDEFD2";
    google_color_link = "0000CC";
    google_color_url = "008000";
    google_color_text = "000000";
    //--></script>
    <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>


</td>





</tr>
</table>


<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-665946-1";
urchinTracker();
</script>


</body>

</html>